if SERVER then return end

print( "CLIENT" )

local function doIncludes( incs, callback )
    local included = 0
    if #incs == 0 then
        callback()
    else
        local function recursiveInclude()
            include( incs[ included + 1 ], function()
                included = included + 1
                if included == #incs then
                    callback()
                else
                    recursiveInclude()
                end
            end )
        end
        recursiveInclude()
    end
end

if player() == owner() then
    function NAB.core.preInit ( name, data )
        local includes = {

        }

        NAB.UID = data.UID

        doIncludes( includes, function()
            NAB.core.init()
        end )
    end

    function NAB.core.init ()
        local includes = {

        }

        doIncludes( includes, function ()
            net.receive( "[sv:nab_net] core.init", function ( name, data )
                net.remove( "[sv:nab_net] core.init" )

                net.send( "[cl:nab_net] core.init", nil )
                NAB.core.postInit()
            end )

            net.send( "[cl:nab_net] core.init", nil )
        end )
    end

    function NAB.core.postInit ()
        local includes = {

        }

        doIncludes( includes, function ()

        end )
    end
end

net.receive( "[sv:nab_net] core.preInit", NAB.core.preInit )
